<div class="d-flex flex-column gap-4 align-items-center">
  <!-- Header -->

  <form
    [formGroup]="paymentForm"
    (ngSubmit)="onSubmitPayment()"
    class="d-flex flex-column gap-3 uik-color-white-bg p-3 rounded-3"
  >
    <!-- Name Section -->
    <div>
      <h5 class="section-title mb-1">Personal Information</h5>
      <div class="row g-1">
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Full Name</mat-label>
            <input
              matInput
              formControlName="fullName"
              placeholder="John Doe"
              autocomplete="name"
            />
            @if (hasError('fullName')) {
              <mat-error>{{ getErrorMessage('fullName') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Phone Number</mat-label>
            <uik-intl-tel-input
              formControlName="phoneNumber"
            ></uik-intl-tel-input>
            <mat-hint>Example: +33605040302 for a French number.</mat-hint>
            @if (hasError('phoneNumber')) {
              <mat-error>{{ getErrorMessage('phoneNumber') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Email</mat-label>
            <input
              matInput
              formControlName="email"
              placeholder="john.doe@example.com"
              autocomplete="email"
            />
            @if (hasError('email')) {
              <mat-error>{{ getErrorMessage('email') }}</mat-error>
            }
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Delivery Address Section -->
    <div>
      <h5 class="section-title mb-1">Delivery Address</h5>
      <div class="row g-1">
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Address</mat-label>
            <input
              matInput
              formControlName="address"
              placeholder="123 Main Street"
              autocomplete="street-address"
            />
            @if (hasError('address')) {
              <mat-error>{{ getErrorMessage('address') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>City</mat-label>
            <input
              matInput
              formControlName="city"
              placeholder="Paris"
              autocomplete="address-level2"
            />
            @if (hasError('city')) {
              <mat-error>{{ getErrorMessage('city') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Zip Code</mat-label>
            <input
              matInput
              formControlName="zip"
              placeholder="75001"
              autocomplete="postal-code"
            />
            @if (hasError('zip')) {
              <mat-error>{{ getErrorMessage('zip') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Country</mat-label>
            <input
              matInput
              formControlName="country"
              placeholder="France"
              autocomplete="country-name"
            />
            @if (hasError('country')) {
              <mat-error>{{ getErrorMessage('country') }}</mat-error>
            }
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Payment Section -->
    <div>
      <h5 class="section-title mb-1">Payment Information</h5>
      <div class="row g-1">
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Card Number</mat-label>
            <input
              matInput
              formControlName="cardNumber"
              placeholder="1234 5678 9012 3456"
              autocomplete="cc-number"
              maxlength="16"
            />
            @if (hasError('cardNumber')) {
              <mat-error>{{ getErrorMessage('cardNumber') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Expiry Date</mat-label>
            <input
              matInput
              formControlName="expiryDate"
              placeholder="MM/YY"
              autocomplete="cc-exp"
              maxlength="5"
            />
            @if (hasError('expiryDate')) {
              <mat-error>{{ getErrorMessage('expiryDate') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>CCV</mat-label>
            <input
              matInput
              formControlName="ccv"
              placeholder="123"
              autocomplete="cc-csc"
              maxlength="3"
            />
            @if (hasError('ccv')) {
              <mat-error>{{ getErrorMessage('ccv') }}</mat-error>
            }
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field appearance="outline" class="w-100">
            <mat-label>Cardholder Name</mat-label>
            <input
              matInput
              formControlName="cardholderName"
              placeholder="John Doe"
              autocomplete="cc-name"
            />
            @if (hasError('cardholderName')) {
              <mat-error>{{ getErrorMessage('cardholderName') }}</mat-error>
            }
          </mat-form-field>
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="d-flex justify-content-end gap-3">
      <button
        type="button"
        mat-button
        color="secondary"
        (click)="onBackToBasket()"
      >
        Back to Basket
      </button>
      <button
        type="submit"
        mat-flat-button
        color="primary"
        size="large"
        [disabled]="paymentForm.invalid"
      >
        Submit Payment
      </button>
    </div>
  </form>
</div>
